# Project Structure Documentation

## Overview

Meta-Googler follows a modern Python package structure optimized for:
- **Distribution**: Ready for PyPI publication
- **Maintenance**: Clear separation of concerns
- **Development**: Easy to understand and extend
- **Testing**: Organized for unit and integration tests

## Directory Layout

```
meta-googler/
â”‚
â”œâ”€â”€ ğŸ“¦ src/                              # Main application package
â”‚   â”œâ”€â”€ __init__.py                      # Package marker
â”‚   â”œâ”€â”€ main.py                          # Application entry point
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ¨ GUI & User Interface
â”‚   â”‚   â””â”€â”€ app_gui.py                   # Main GUI application (CustomTkinter)
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸµ Core Functionality
â”‚   â”‚   â”œâ”€â”€ song_identifier.py           # Song identification (AudD API)
â”‚   â”‚   â”œâ”€â”€ song_metadata_fixer_v2.py    # Metadata management & validation
â”‚   â”‚   â”œâ”€â”€ batch_process.py             # Batch processing system
â”‚   â”‚   â””â”€â”€ ai_manager_v2.py             # LiteLLM multi-model AI
â”‚   â”‚
â”‚   â””â”€â”€ ğŸ› ï¸ utils/                        # Supporting utilities
â”‚       â”œâ”€â”€ __init__.py                  # Package marker
â”‚       â”œâ”€â”€ cover_art_fetcher.py        # Cover art retrieval & embedding
â”‚       â”œâ”€â”€ suggestion_window.py        # AI suggestion UI dialogs
â”‚       â”œâ”€â”€ config_manager.py           # Configuration management
â”‚       â””â”€â”€ logger_setup.py             # Logging infrastructure
â”‚
â”œâ”€â”€ ğŸ“š docs/                             # Comprehensive documentation
â”‚   â”œâ”€â”€ README.md                        # Project overview
â”‚   â”œâ”€â”€ MCP_LITELLM_GUIDE.md            # LiteLLM + MCP upgrade guide
â”‚   â”œâ”€â”€ MCP_LITELLM_QUICK_REF.md        # Quick reference
â”‚   â”œâ”€â”€ PHASE1_COMPLETE.md              # Phase 1 summary
â”‚   â”œâ”€â”€ SONG_IDENTIFICATION_GUIDE.md    # Identification system details
â”‚   â”œâ”€â”€ AI_FEATURE_GUIDE.md             # AI features documentation
â”‚   â”œâ”€â”€ COVER_ART_GUIDE.md              # Cover art system guide
â”‚   â”œâ”€â”€ INTERNET_COVER_ART_GUIDE.md     # Internet cover art features
â”‚   â”œâ”€â”€ SETUP_ACRCLOUD.md               # ACRCloud API setup
â”‚   â””â”€â”€ PHASE_3_COMPLETION_REPORT.md    # Phase 3 report
â”‚
â”œâ”€â”€ âš™ï¸ config/                           # Configuration files
â”‚   â””â”€â”€ settings.example.json            # Example configuration template
â”‚
â”œâ”€â”€ ğŸ§ª tests/                           # Test suite (future)
â”‚   â””â”€â”€ (test files go here)
â”‚
â”œâ”€â”€ ğŸ“‹ Root Configuration Files
â”‚   â”œâ”€â”€ pyproject.toml                   # Modern Python project config
â”‚   â”œâ”€â”€ setup.py                         # Setup script (compatibility)
â”‚   â”œâ”€â”€ setup.cfg                        # Setup configuration
â”‚   â”œâ”€â”€ requirements.txt                 # Dependency specifications
â”‚   â”œâ”€â”€ Makefile                         # Development commands
â”‚   â”œâ”€â”€ .env.example                     # Environment variables template
â”‚   â”œâ”€â”€ .gitignore                       # Git ignore rules
â”‚   â””â”€â”€ README.md                        # Main README
â”‚
â””â”€â”€ ğŸ“ dist/                             # Distribution files (build artifacts)
    â””â”€â”€ (generated by build tools)
```

## File Organization

### src/ Package Structure

#### Core Application Files

| File | Purpose | Lines | Status |
|------|---------|-------|--------|
| `main.py` | Application entry point | ~30 | âœ… New |
| `app_gui.py` | CustomTkinter GUI | ~1000 | âœ… Functional |
| `song_identifier.py` | Audio fingerprinting & identification | ~400 | âœ… Working |
| `song_metadata_fixer_v2.py` | Metadata I/O & validation | ~1500 | âœ… Enhanced |
| `batch_process.py` | Batch file processing | ~250 | âœ… Functional |
| `ai_manager_v2.py` | LiteLLM multi-model support | ~400 | âœ… Phase 1 Complete |

#### Utilities (src/utils/)

| File | Purpose | Lines |
|------|---------|-------|
| `cover_art_fetcher.py` | Cover art retrieval | ~600 |
| `suggestion_window.py` | UI dialogs | ~250 |
| `config_manager.py` | Configuration handling | ~150 |
| `logger_setup.py` | Logging setup | ~100 |

### Documentation Files (docs/)

All documentation is organized by feature/phase:

- **Setup & Configuration**: `setup_*.md`, `*.example.*`
- **Features**: `*_GUIDE.md`, `*_FEATURE_*.md`
- **Phases**: `PHASE*_COMPLETE.md`
- **Architecture**: `MCP_LITELLM*.md`

## Import Paths

### Before Restructuring
```python
from app_gui import MetadataEditorGUI
from song_identifier import SongIdentifier
from config_manager import ConfigManager
```

### After Restructuring
```python
from src.app_gui import MetadataEditorGUI
from src.song_identifier import SongIdentifier
from src.utils.config_manager import ConfigManager
```

### From Within Package
```python
# From src/app_gui.py
from src.song_identifier import SongIdentifier
from src.utils.cover_art_fetcher import CoverArtFetcher
```

## Dependencies Management

### requirements.txt
- Pinned versions for reproducibility
- Used by: `pip install -r requirements.txt`

### setup.py
- Backward compatibility
- Used by: `python setup.py install`
- Includes entry points for console scripts

### pyproject.toml
- Modern Python project config (PEP 517/518)
- Primary configuration file
- Includes build system, metadata, dependencies
- Supports extras (e.g., `pip install .[dev]`)

## Entry Points

Multiple ways to run the application:

1. **Development (fastest)**
   ```bash
   make run
   python -m src.main
   python3 src/main.py
   ```

2. **After editable install**
   ```bash
   pip install -e .
   meta-googler
   ```

3. **After regular install**
   ```bash
   pip install .
   meta-googler
   ```

## Development Workflow

### Using Makefile
```bash
make install        # Install dependencies
make dev-install    # Install with dev tools
make run           # Launch application
make test          # Run tests
make lint          # Check code quality
make format        # Format code
make clean         # Clean artifacts
```

### Manual Setup
```bash
# Create virtual environment
python -m venv venv
source venv/bin/activate

# Install in development mode
pip install -e .

# Run application
python -m src.main
```

## Package Publication (Future)

When ready for PyPI:

```bash
# Build distribution
python -m build

# Upload to PyPI
python -m twine upload dist/*
```

Then users can install with:
```bash
pip install meta-googler
```

## Configuration Hierarchy

1. **Environment Variables** (.env)
   ```
   LLM_MODEL=ollama/mistral
   OPENAI_API_KEY=sk-...
   ```

2. **Configuration File** (config/settings.json)
   ```json
   {"ai": {"provider": "ollama", "model": "mistral"}}
   ```

3. **Application Defaults** (hardcoded)
   ```python
   DEFAULT_MODEL = "ollama/mistral"
   ```

## Testing Structure (Future)

```
tests/
â”œâ”€â”€ unit/
â”‚   â”œâ”€â”€ test_song_identifier.py
â”‚   â”œâ”€â”€ test_metadata_fixer.py
â”‚   â””â”€â”€ test_ai_manager.py
â”œâ”€â”€ integration/
â”‚   â”œâ”€â”€ test_end_to_end.py
â”‚   â””â”€â”€ test_gui.py
â””â”€â”€ fixtures/
    â””â”€â”€ sample_files/
```

## Version Management

- **Package Version**: `pyproject.toml` (1.0.0)
- **Git Tags**: For releases (v1.0.0, v1.1.0, etc.)
- **Changelog**: docs/CHANGELOG.md (future)

## Build & Distribution

### Artifacts Generated

```
dist/
â”œâ”€â”€ meta_googler-1.0.0-py3-none-any.whl
â””â”€â”€ meta_googler-1.0.0.tar.gz
```

### Package Metadata

Located in `*.egg-info/`:
- `METADATA`
- `entry_points.txt`
- `requires.txt`
- `top_level.txt`

## Continuous Integration (CI/CD)

GitHub Actions workflows (future):
```
.github/workflows/
â”œâ”€â”€ tests.yml          # Run tests on push
â”œâ”€â”€ lint.yml           # Code quality checks
â”œâ”€â”€ build.yml          # Build distribution
â””â”€â”€ publish.yml        # Publish to PyPI
```

## Key Benefits of This Structure

âœ… **Professional**: Follows Python packaging best practices  
âœ… **Distributable**: Ready for PyPI publication  
âœ… **Maintainable**: Clear separation of concerns  
âœ… **Testable**: Organized for unit/integration tests  
âœ… **Extensible**: Easy to add new modules  
âœ… **Compatible**: Works with modern Python tooling  
âœ… **Documented**: Clear structure and purpose  

---

**Last Updated**: November 8, 2025  
**Status**: âœ… Complete - Production-ready structure
